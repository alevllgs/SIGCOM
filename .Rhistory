CC=="UNIDAD ONCOLOGIA"~"87-HOSPITALIZACIÓN ONCOLOGÍA",
CC=="PABELLON CARDIOLOGIA"~"464-QUIRÓFANOS CARDIOVASCULAR",
CC=="CIRUGIA PLASTICA Y QUEMADOS"~"90-HOSPITALIZACIÓN QUIRÚRGICA",
CC=="TRAUMATOLOGIA GENERAL"~"485-QUIRÓFANOS TRAUMATOLOGÍA Y ORTOPEDIA",
CC=="CAE CONS. BRONCOPULMONAR"~"282-CONSULTA NEUMOLOGÍA",
CC=="CAE LAB. BRONCOPULMONAR"~"244-PROCEDIMIENTO DE NEUMOLOGÍA",
CC=="CAE CARDIOLOGIA"~"276-CONSULTA CARDIOLOGÍA",
CC=="CAE CIRUGIA GENERAL"~"351-CONSULTA CIRUGÍA PEDIÁTRICA",
CC=="CAE DERMATOLOGIA"~"277-CONSULTA DERMATOLOGÍA",
CC=="CAE ENDOCRINOLOGIA"~"281-CONSULTA ENDOCRINOLOGÍA",
CC=="CAE GASTROENTEROLOGIA"~"290-CONSULTA GASTROENTEROLOGÍA",
CC=="CAE ONCOLOGIA"~"306-CONSULTA HEMATOLOGÍA ONCOLÓGICA",
CC=="CAE CONS. NEFROLOGIA"~"285-CONSULTA NEFROLOGÍA",
CC=="CAE CONS. NEUROLOGIA"~"331-CONSULTA NEUROLOGÍA PEDIÁTRICA",
CC=="CAE LAB. EEG NEUROLOGIA"~"269-PROCEDIMIENTOS DE NEUROLOGÍA",
CC=="CAE CONS. OTORRINOLARINGOLOGIA"~"319-CONSULTA OTORRINOLARINGOLOGÍA",
CC=="CENTRAL DE PROCEDIMIENTOS"~"473-QUIRÓFANOS MENOR AMBULATORIA",
CC=="CAE ODONTOLOGIA"~"356-CONSULTA ODONTOLOGÍA",
CC=="CAE SALUD MENTAL AMBULATORIO"~"280-CONSULTA PSIQUIATRÍA",
CC=="SALUD MENTAL HOSPITALIZADOS"~"149-HOSPITALIZACIÓN PSIQUIATRÍA",
CC=="IMAGENOLOGIA"~"542-IMAGENOLOGÍA",
CC=="UNIDAD DE EMERGENCIA"~"216-EMERGENCIAS PEDIÁTRICAS",
CC=="LABORATORIO CLINICO"~"518-LABORATORIO CLÍNICO",
CC=="LABORATORIO HEMATOLOGIA"~"518-LABORATORIO CLÍNICO",
CC=="LABORATORIO MICROBIOLOGIA"~"518-LABORATORIO CLÍNICO",
CC=="LABORATORIO URGENCIA Y QCA"~"518-LABORATORIO CLÍNICO",
CC=="LAB.CITOMETRIA DE FLUJO"~"518-LABORATORIO CLÍNICO",
CC=="BANCO DE SANGRE"~"575-BANCO DE SANGRE",
CC=="PERSONAL"~"670-ADMINISTRACIÓN",
CC=="ABASTECIMIENTO"~"670-ADMINISTRACIÓN",
CC=="FARMACIA"~"593-SERVICIO FARMACEUTICO",
CC=="ESTERILIZACION"~"662-CENTRAL DE ESTERILIZACIÓN",
CC=="ALIMENTACION"~"652-SERVICIO DE ALIMENTACIÓN",
CC=="RECURSOS FISICOS"~"670-ADMINISTRACIÓN",
CC=="INFRAESTRUCTURA"~"670-ADMINISTRACIÓN",
CC=="HIGIENE HOSPITALARIA"~"648-ASEO",
CC=="TRANSPORTE Y COMUNICACIONES"~"664-TRANSPORTE GENERAL",
CC=="JARDIN INFANTIL DR. A. VIGNAU"~"670-ADMINISTRACIÓN",
CC=="SOME"~"670-ADMINISTRACIÓN",
CC=="INFORMATICA"~"670-ADMINISTRACIÓN",
CC=="RESIDENCIA MEDICA 4TO PISO"~"116-HOSPITALIZACIÓN PEDIATRÍA",
CC=="PABELLON HEMODINAMIA"~"240-PROCEDIMIENTO DE CARDIOLOGÍA",
CC=="CAE CENTRO HEMOFILICO"~"260-PROCEDIMIENTO ONCOLOGÍA",
CC=="CAPACITACION"~"670-ADMINISTRACIÓN",
CC=="EQUIPOS MEDICOS"~"665-MANTENIMIENTO",
CC=="UNIDAD TRATAMIENTO INTERMEDIO"~"170-UNIDAD DE CUIDADOS INTENSIVOS PEDIATRIA",
CC=="CAE VIH"~"284-CONSULTA INFECTOLOGÍA",
CC=="UNIDAD PEDIATRIA GENERAL D"~"116-HOSPITALIZACIÓN PEDIATRÍA",
CC=="COMERCIALIZACION"~"670-ADMINISTRACIÓN",
CC=="GESTION INGRESO Y PERMANENCIA"~"670-ADMINISTRACIÓN",
CC=="UNIDAD COORDINACION GES"~"670-ADMINISTRACIÓN",
CC=="UNIDAD DE GESTION DE DEMANDA"~"670-ADMINISTRACIÓN",
CC=="UNIDAD DE REHABILITACION"~"567-REHABILITACIÓN",
CC=="EQUIPOS INDUSTRIALES"~"670-ADMINISTRACIÓN",
CC=="SERVICIOS GENERALES"~"664-TRANSPORTE GENERAL",
CC=="UTI CARDIOVASCULAR"~"198-UNIDAD DE TRATAMIENTO INTENSIVO CORONARIOS",
CC=="AUDITORIA"~"670-ADMINISTRACIÓN",
CC=="UNIDAD CONTROL DEL GESTION"~"670-ADMINISTRACIÓN",
CC=="ADM QUIRURGICO"~"90-HOSPITALIZACIÓN QUIRÚRGICA",
CC=="CAE UROLOGIA"~"311-CONSULTA UROLOGÍA",
CC=="CAE CONS. OFTALMOLOGIA"~"317-CONSULTA OFTALMOLOGÍA",
CC=="SERVICIO SOCIAL PERSONAL"~"713-TRABAJO SOCIAL",
CC=="CONTABILIDAD Y PRESUPUESTO"~"670-ADMINISTRACIÓN",
CC=="SEGURIDAD"~"670-ADMINISTRACIÓN",
CC=="ASEO Y ORNATO PATIOS Y JARDINE"~"648-ASEO",
CC=="BIBLIOTECA"~"670-ADMINISTRACIÓN",
CC=="RESIDENCIA ENFERMERAS"~"670-ADMINISTRACIÓN",
CC=="ESTADISTICA"~"670-ADMINISTRACIÓN",
CC=="S.D.RR.HH"~"670-ADMINISTRACIÓN",
CC=="CHILE CRECE CONTIGO"~"713-TRABAJO SOCIAL",
CC=="UNIDAD ANALISIS REG.CLINICO"~"670-ADMINISTRACIÓN",
CC=="INFRAESTRUCTURA HOSPITAL"~"670-ADMINISTRACIÓN",
CC=="PREV.RIESGO Y S.OCUPACIONAL"~"670-ADMINISTRACIÓN",
CC=="SALA REAS"~"670-ADMINISTRACIÓN",
CC=="EQUIPOS INDUSTRIALES(HOSPITAL)"~"670-ADMINISTRACIÓN",
CC=="I.A.A.S"~"670-ADMINISTRACIÓN",
CC=="UNIDAD ASISTENCIAL DOCENTE"~"670-ADMINISTRACIÓN",
CC=="LAB.BIOLOGIA MOLECULAR"~"518-LABORATORIO CLÍNICO",
CC=="CAE PREMATUROS"~"328-CONSULTA PEDIATRÍA GENERAL",
CC=="SALA CUIDADO PROLONGADO"~"170-UNIDAD DE CUIDADOS INTENSIVOS PEDIATRIA",
CC=="VACUNATORIO"~"670-ADMINISTRACIÓN",
CC=="OFICINA DE SUELDOS"~"670-ADMINISTRACIÓN",
CC=="SUBDIRECCION ADMINISTRATIVA"~"670-ADMINISTRACIÓN",
CC=="SUBDIRECCION MEDICA"~"670-ADMINISTRACIÓN",
CC=="EQUIPAMIENTO HOSPITAL"~"670-ADMINISTRACIÓN",
CC=="BODEGAS ABASTECIMIENTO"~"670-ADMINISTRACIÓN",
CC=="CIRUGIA GENERAL"~"90-HOSPITALIZACIÓN QUIRÚRGICA",
CC=="C.COSTO GLOBAL"~"670-ADMINISTRACIÓN",
CC=="GASTOS HOSPITAL"~"670-ADMINISTRACIÓN",
CC=="CAE ESPECIALIDADES 2"~"Cae Prorratear",
CC=="PABELLONES"~"Pabellón Prorratear",
TRUE ~ "Asignar CC"
)) %>%
select(item_pres, CC,ItemxCC, Total) %>%
group_by (item_pres, CC,ItemxCC,) %>%
summarise("Total" = sum(Total)) %>%
ungroup()
for (i in cuentas) {
if(i %in% SIGFE$SIGCOM & i %in% CxCC$ItemxCC){
CCC <- CxCC %>% filter(ItemxCC == i) %>%
select(CC, Total) %>%
group_by (CC) %>%
summarise(Total =sum(Total)) %>%
mutate("prop" = Total/sum(Total))
GG2 <-  SIGFE %>% group_by(SIGCOM) %>%
summarise(Devengado = sum(Devengado)) %>%
filter(SIGCOM == i)
GG2 <- GG2 %>% summarise("Centro de Costo" = CCC$CC,
Devengado = Devengado*CCC$prop,
"Cuenta"=i, "Tipo" = 2)
GG1 <- rbind(GG1,GG2)}
else if (i %in% SIGFE$SIGCOM & i %in% CxCC_H$ItemxCC){
CCC <- CxCC_H %>% filter(ItemxCC == i) %>%
select(CC, Total) %>%
group_by (CC) %>%
summarise(Total =sum(Total)) %>%
mutate("prop" = Total/sum(Total))
GG2 <-  SIGFE %>% group_by(SIGCOM) %>%
summarise(Devengado = sum(Devengado)) %>%
filter(SIGCOM == i)
GG2 <- GG2 %>% summarise("Centro de Costo" = CCC$CC,
Devengado = Devengado*CCC$prop,
"Cuenta"=i, "Tipo" = 2)
GG1 <- rbind(GG1,GG2)}
else if (i %in% SIGFE$SIGCOM){
GG2 <-  SIGFE %>% group_by(SIGCOM) %>%
summarise(Devengado = sum(Devengado)) %>%
filter(SIGCOM == i)
GG2 <- GG2 %>% summarise("Centro de Costo" = M2$CC,
Devengado = Devengado*M2$prop,
"Cuenta"=i, "Tipo" = 2)
GG1 <- rbind(GG1,GG2)}
else  {GG2 <- GG1_nulo
GG1 <- rbind(GG1,GG2) %>% filter(Cuenta!="eliminar")}
}
View(M2_clinico)
proporcion_exacta <- ifelse(i %in% cuentas_cae, "cuentas_cae",
ifelse(i %in% cuentas_clinico, "cuentas_clinico",
ifelse(i %in% cuentas_qx, "cuentas_qx", "cuentas_total")))
cuentas_total <- c("52-ARRENDAMIENTOS",
"129-MANTENIMIENTO EQUIPO DE CÓMPUTO",
"131-MANTENIMIENTO MAQUINARIA Y EQUIPO",
"132-MANTENIMIENTO MUEBLES Y ENSERES",
"135-MANTENIMIENTO Y REPARACION DE VEHICULOS",
"147-OTROS MANTENIMIENTOS",
"151-PASAJES, FLETES Y BODEGAJE")
cuentas_clinico <- c("149-PASAJES Y TRASLADOS DE PACIENTES",
"178-SERVICIO DE LAVANDERÍA")
cuentas_qx <- c("63-COMPRA DE INTERVENCIONES QUIRÚRGICAS CLÍNICAS",
"64-COMPRA DE INTERVENCIONES QUIRÚRGICAS INTRAHOSPITALARIAS CON PERSONAL EXTERNO",
"65-COMPRA DE INTERVENCIONES QUIRÚRGICAS INTRAHOSPITALARIAS CON PERSONAL INTERNO")
cuentas_cae <- c("61-COMPRA DE CONSULTAS MÉDICAS",
"62-COMPRA DE CONSULTAS NO MÉDICAS")
proporcion_exacta <- ifelse(i %in% cuentas_cae, "cuentas_cae",
ifelse(i %in% cuentas_clinico, "cuentas_clinico",
ifelse(i %in% cuentas_qx, "cuentas_qx", "cuentas_total")))
proporcion_exacta
i
View(M2_clinico)
View(M2Pab)
View(M2)
proporcion_exacta <- ifelse(i %in% cuentas_cae, "=='Consultas'",
ifelse(i %in% cuentas_clinico, "!='Apoyo'",
ifelse(i %in% cuentas_qx, "=='Quirofanos'")))
paste0("==", 'Consultas')
proporcion_exacta <- ifelse(i %in% cuentas_cae, paste0("==", 'Consultas'),
ifelse(i %in% cuentas_clinico, paste0("!=", 'Apoyo'),
ifelse(i %in% cuentas_qx, paste0("==", 'Quirofanos'))))
proporcion_exacta <- ifelse(i %in% cuentas_cae, paste0("==", 'Consultas'),
ifelse(i %in% cuentas_clinico, paste0("!=", 'Apoyo'),
ifelse(i %in% cuentas_qx, paste0("==",'Quirofanos'), paste0("!=", 'No_existe'))))
proporcion_exacta
M2_exacto <- M2 %>% paste0(filter(Area,proporcion_exacta))
M2_exacto$prop <- M2_clinico$M2/sum(M2_clinico$M2)
paste0(filter(Area,proporcion_exacta))
M2_exacto <- M2 %>% filter(paste0(Area,proporcion_exacta))
M2_exacto$prop <- M2_clinico$M2/sum(M2_clinico$M2)
(paste0(Area,proporcion_exacta)
M2_exacto <- M2 %>% filter(paste0(Area,proporcion_exacta))
proporcion_exacta
unique(M2$Area)
proporcion_exacta <- ifelse(i %in% cuentas_cae, 'Consultas',
ifelse(i %in% cuentas_clinico, paste0('Consultas'|'Quirofanos'|"UPC"|"Procedimientos"|"Emergencia"|"Hospitalización"),
ifelse(i %in% cuentas_qx, 'Quirofanos'), "!=", 'No_existe'))
proporcion_exacta <- ifelse(i %in% cuentas_cae, 'Consultas',
ifelse(i %in% cuentas_clinico, paste0('Consultas'|'Quirofanos'|"UPC"|"Procedimientos"|"Emergencia"|"Hospitalización"),
ifelse(i %in% cuentas_qx, 'Quirofanos', paste0('Consultas'|'Quirofanos'|"UPC"|"Procedimientos"|"Emergencia"|"Hospitalización"|"Apoyo"))))
paste0('Consultas'|'Quirofanos'|"UPC"|"Procedimientos"|"Emergencia"|"Hospitalización")
paste0("Consultas","|","Quirofanos","|","UPC","|","Procedimientos","|","Emergencia","|","Hospitalización")
proporcion_exacta <- ifelse(i %in% cuentas_cae, 'Consultas',
ifelse(i %in% cuentas_clinico, paste0("Consultas","|","Quirofanos","|","UPC","|","Procedimientos","|","Emergencia","|","Hospitalización"),
ifelse(i %in% cuentas_qx, 'Quirofanos', paste0("Consultas","|","Quirofanos","|","UPC","|","Procedimientos","|","Emergencia","|","Hospitalización","|","Apoyo"))))
M2_exacto <- M2 %>% filter(Area==proporcion_exacta)
proporcion_exacta
paste0("Consultas""","|","Quirofanos","|","UPC","|","Procedimientos","|","Emergencia","|","Hospitalización")
paste0("Consultas'"'',"|","Quirofanos","|","UPC","|","Procedimientos","|","Emergencia","|","Hospitalización")
paste0("Consultas"'"',"|","Quirofanos","|","UPC","|","Procedimientos","|","Emergencia","|","Hospitalización")
paste0("Consultas"'"')
paste0("Consultas"'")
paste0("Consultas"+"Hospitalización")
a <- paste0("Consultas"+"Hospitalización")
a
a
SIGFE
a <- "|"
paste0(a,b)
a <- "|"
b <- 'Consultas'
c <- paste0(a,b)
a <- "|"
b <- "Consultas"
c <- paste0(a,b)
c
a <- "|"
b <- "Consultas"
c <- paste0(b,a)
c
c <- paste0(b,"|"a)
c <- paste0(b,"|",a)
c
a
c <- paste0(b,|,a)
c <- paste0(b,a)
c
d <- "'"
c <- paste0(b,d,a)
c
d <- """
d <- '"'
d <- '"'
c <- paste0(b,d,a)
c
c <- paste0(b,d,a,b)
c
proporcion_exacta <- ifelse(i %in% cuentas_cae, "cuentas_cae",
ifelse(i %in% cuentas_clinico, "cuentas_clinico",
ifelse(i %in% cuentas_qx, "cuentas_qx")))
proporcion_exacta <- ifelse(i %in% cuentas_cae, "cuentas_cae",
ifelse(i %in% cuentas_clinico, "cuentas_clinico",
ifelse(i %in% cuentas_qx, "cuentas_qx", "todos")))
proporcion_exacta
M2_exacto <- M2 %>% mutate("exacto"==proporcion_exacta)
M2_exacto <- M2 %>% mutate("exacto"= proporcion_exacta)
M2_exacto <- M2 %>% mutate("exacto"= proporcion_exacta)
M2_exacto <- M2 %>% mutate(exacto= proporcion_exacta)
M2_exacto$exacto <- proporcion_exacta
M2_exacto <- M2
M2_exacto$exacto <- proporcion_exacta
View(M2_exacto)
M2_exacto <- M2 %>% filter(Area==proporcion_exacta)
M2_exacto <- M2_exacto %>% filter(exacto==proporcion_exacta)
M2_exacto <- M2_exacto %>% filter(exacto == proporcion_exacta)
library(tidyverse)
library(readxl)
library(lubridate)
library(janitor)
library(dplyr)
library(openxlsx)
library(xlsx)
M2_exacto <- M2_exacto %>% filter(exacto == proporcion_exacta)
M2_exacto <- M2
M2_exacto$exacto <- proporcion_exacta
M2_exacto <- M2_exacto %>% filter(exacto == proporcion_exacta)
M2_exacto$prop <- M2_exacto$M2/sum(M2_exacto$M2)
View(M2_exacto)
proporcion_exacta <-"cuentas_cae"
M2_exacto <- M2
M2_exacto$exacto <- proporcion_exacta
M2_exacto <- M2_exacto %>% filter(exacto == proporcion_exacta)
M2_exacto$prop <- M2_exacto$M2/sum(M2_exacto$M2)
View(M2_exacto)
M2_exacto <- M2
if (proporcion_exacta=="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
} else if (proporcion_exacta=="cuentas_clinico") {
M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")}
else if (proporcion_exacta=="cuentas_qx") {
M2_exacto <- M2_exacto %>% filter(Area=="Quirofanos")}
else {M2_exacto <- M2}
proporcion_exacta
proporcion_exacta <- ifelse(i %in% cuentas_cae, "cuentas_cae",
ifelse(i %in% cuentas_clinico, "cuentas_clinico",
ifelse(i %in% cuentas_qx, "cuentas_qx", "todos")))
M2_exacto <- M2
if (proporcion_exacta =="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
}
else if (proporcion_exacta=="cuentas_clinico") {
M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")}
else if (proporcion_exacta=="cuentas_qx") {
M2_exacto <- M2_exacto %>% filter(Area=="Quirofanos")}
else {M2_exacto <- M2}
if (proporcion_exacta =="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
}
View(M2_exacto)
proporcion_exacta
if (proporcion_exacta =="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
}
else if (proporcion_exacta=="cuentas_clinico") {
M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")
}
else if (proporcion_exacta=="cuentas_qx") {
M2_exacto <- M2_exacto %>% filter(Area=="Quirofanos")
}
else {M2_exacto <- M2}
proporcion_exacta <- "cuentas_cae"
if (proporcion_exacta =="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
}
else if (proporcion_exacta=="cuentas_clinico") {
M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")
}
else if (proporcion_exacta=="cuentas_qx") {
M2_exacto <- M2_exacto %>% filter(Area=="Quirofanos")
}
else {M2_exacto <- M2}
if (proporcion_exacta =="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
}
if (proporcion_exacta =="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
}
else if (proporcion_exacta=="cuentas_clinico") {
M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")
}
View(M2_exacto)
if (proporcion_exacta =="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
}
else if (proporcion_exacta=="cuentas_clinico") {
M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")
}
else if (proporcion_exacta=="cuentas_qx") {
M2_exacto <- M2_exacto %>% filter(Area=="Quirofanos")
}
else {M2_exacto <- M2_exacto %>% filter(Area!="No_existe")}
M2_exacto <- M2
M2_exacto <- M2_exacto %>% filter(Area=="Consultas"
View(M2_exacto)
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
View(M2_exacto)
if (proporcion_exacta =="cuentas_cae"){
M2_exacto <- M2_exacto %>% filter(Area=="Consultas")
}
else if (proporcion_exacta=="cuentas_clinico"){
M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")
}
else if (proporcion_exacta=="cuentas_qx"){
M2_exacto <- M2_exacto %>% filter(Area=="Quirofanos")
}
else {M2_exacto <- M2_exacto %>% filter(Area!="No_existe")}
if (proporcion_exacta =="cuentas_cae"){M2_exacto <- M2_exacto %>% filter(Area=="Consultas")}
else if (proporcion_exacta=="cuentas_clinico"){M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")}
else if (proporcion_exacta=="cuentas_qx"){M2_exacto <- M2_exacto %>% filter(Area=="Quirofanos")}
else {M2_exacto <- M2_exacto %>% filter(Area!="No_existe")}
M2_exacto <- M2
if (proporcion_exacta =="cuentas_cae")
{M2_exacto <- M2_exacto %>% filter(Area=="Consultas")}
else if (proporcion_exacta=="cuentas_clinico")
{M2_exacto <- M2_exacto %>% filter(Area!="Apoyo")}
else if (proporcion_exacta=="cuentas_qx")
{M2_exacto <- M2_exacto %>% filter(Area=="Quirofanos")}
else
{M2_exacto <- M2_exacto %>% filter(Area!="No_existe")}
M2_exacto
M2_exacto <- M2
M2_exacto
if (proporcion_exacta =="cuentas_cae")
{M2_exacto <- M2_exacto %>% filter(Area == "Consultas")}
else if (proporcion_exacta =="cuentas_clinico")
{M2_exacto <- M2_exacto %>% filter(Area != "Apoyo")}
else if (proporcion_exacta =="cuentas_qx")
{M2_exacto <- M2_exacto %>% filter(Area == "Quirofanos")}
else
{M2_exacto <- M2_exacto %>% filter(Area != "No_existe")}
if (proporcion_exacta =="cuentas_cae")
{M2_exacto <- M2_exacto %>% filter(Area == "Consultas")}
else if (proporcion_exacta =="cuentas_clinico")
{M2_exacto <- M2_exacto %>% filter(Area != "Apoyo")}
else if (proporcion_exacta =="cuentas_qx")
{M2_exacto <- M2_exacto %>% filter(Area == "Quirofanos")}
if (proporcion_exacta =="cuentas_cae")
{M2_exacto <- M2_exacto %>% filter(Area == "Consultas")}
else
{M2_exacto <- M2_exacto %>% filter(Area != "No_existe")}
if (proporcion_exacta =="cuentas_cae")
{M2_exacto <- M2_exacto %>% filter(Area == "Consultas")}
if (proporcion_exacta =="cuentas_clinico")
{M2_exacto <- M2_exacto %>% filter(Area != "Apoyo")}
if (proporcion_exacta =="cuentas_qx")
{M2_exacto <- M2_exacto %>% filter(Area == "Quirofanos")}
proporcion_exacta <- ifelse(i %in% cuentas_cae, "prorrateo_cae",
ifelse(i %in% cuentas_clinico, "prorrateo_clinico",
ifelse(i %in% cuentas_qx, "prorrateo_qx", "todos")))
M2_exacto <- M2
if (proporcion_exacta =="prorrateo_cae")
{M2_exacto <- M2_exacto %>% filter(Area =="Consultas")}
else if (proporcion_exacta =="prorrateo_clinico")
{M2_exacto <- M2_exacto %>% filter(Area !="Apoyo")}
else if (proporcion_exacta =="prorrateo_qx")
{M2_exacto <- M2_exacto %>% filter(Area =="Quirofanos")}
else
{M2_exacto <- M2_exacto %>% filter(Area!="No_existe")}
M2_exacto
View(M2_exacto)
View(M2)
proporcion_exacta <- ifelse(i %in% cuentas_cae, "prorrateo_cae",
ifelse(i %in% cuentas_clinico, "prorrateo_clinico",
ifelse(i %in% cuentas_qx, "prorrateo_qx", "todos")))
M2_exacto <- M2
View(M2_clinico)
View(M2_exacto)
if (proporcion_exacta =="prorrateo_cae")
{M2_exacto <- M2_exacto %>% filter(Area =="Consultas")}
else if (proporcion_exacta =="prorrateo_clinico")
{M2_exacto <- M2_exacto %>% filter(Area !="Apoyo")}
else if (proporcion_exacta =="prorrateo_qx")
{M2_exacto <- M2_exacto %>% filter(Area =="Quirofanos")}
else
{M2_exacto <- M2_exacto %>% filter(Area!="No_existe")}
View(M2_exacto)
proporcion_exacta
if (proporcion_exacta =="prorrateo_cae")
{M2_exacto <- M2 %>% filter(Area =="Consultas")}
else if (proporcion_exacta =="prorrateo_clinico")
{M2_exacto <- M2 %>% filter(Area !="Apoyo")}
else if (proporcion_exacta =="prorrateo_qx")
{M2_exacto <- M2 %>% filter(Area =="Quirofanos")}
else
{M2_exacto <- M2 %>% filter(Area!="No_existe")}
View(M2_exacto)
proporcion_exacta <- "prorrateo_cae"
if (proporcion_exacta =="prorrateo_cae")
{M2_exacto <- M2 %>% filter(Area =="Consultas")}
else if (proporcion_exacta =="prorrateo_clinico")
{M2_exacto <- M2 %>% filter(Area !="Apoyo")}
else if (proporcion_exacta =="prorrateo_qx")
{M2_exacto <- M2 %>% filter(Area =="Quirofanos")}
else
{M2_exacto <- M2 %>% filter(Area!="No_existe")}
View(M2_exacto)
proporcion_exacta
if (proporcion_exacta =="prorrateo_cae")
{M2_exacto <- M2 %>% filter(Area =="Consultas")}
else if (proporcion_exacta =="prorrateo_clinico")
{M2_exacto <- M2 %>% filter(Area !="Apoyo")}
else if (proporcion_exacta =="prorrateo_qx")
{M2_exacto <- M2 %>% filter(Area =="Quirofanos")}
else
{M2_exacto <- M2 %>% filter(Area!="No_existe")}
if (proporcion_exacta = "prorrateo_cae")
{M2_exacto <- M2 %>% filter(Area == "Consultas")}
else if (proporcion_exacta == "prorrateo_clinico")
{M2_exacto <- M2 %>% filter(Area != "Apoyo")}
else if (proporcion_exacta == "prorrateo_qx")
{M2_exacto <- M2 %>% filter(Area == "Quirofanos")}
else
{M2_exacto <- M2 %>% filter(Area!="No_existe")}
M2
proporcion_exacta == "prorrateo_cae"
proporcion_exacta == "prorrateo_clinico"
proporcion_exacta == "prorrateo_qx"
b <- "149-PASAJES Y TRASLADOS DE PACIENTES"
if(b %in% SIGFE$SIGCOM & b %in% CxCC$ItemxCC){
CCC <- CxCC %>% filter(ItemxCC == b) %>%
select(CC, Total) %>%
group_by (CC) %>%
summarise(Total =sum(Total)) %>%
mutate("prop" = Total/sum(Total))
GG2 <-  SIGFE %>% group_by(SIGCOM) %>%
summarise(Devengado = sum(Devengado)) %>%
filter(SIGCOM == b)
GG2 <- GG2 %>% summarise("Centro de Costo" = CCC$CC,
Devengado = Devengado*CCC$prop,
"Cuenta"=b, "Tipo" = 2)
GG1 <- rbind(GG1,GG2)} else
if(b %in% SIGFE$SIGCOM & b %in% CxCC_H$ItemxCC){
CCC <- CxCC_H %>% filter(ItemxCC == b) %>%
select(CC, Total) %>%
group_by (CC) %>%
summarise(Total =sum(Total)) %>%
mutate("prop" = Total/sum(Total))
GG2 <-  SIGFE %>% group_by(SIGCOM) %>%
summarise(Devengado = sum(Devengado)) %>%
filter(SIGCOM == b)
GG2 <- GG2 %>% summarise("Centro de Costo" = CCC$CC,
Devengado = Devengado*CCC$prop,
"Cuenta"=b, "Tipo" = 2)
GG1 <- rbind(GG1,GG2)} else
if(b %in% SIGFE$SIGCOM){
proporcion_exacta <- ifelse(i %in% cuentas_cae, "prorrateo_cae",
ifelse(i %in% cuentas_clinico, "prorrateo_clinico",
ifelse(i %in% cuentas_qx, "prorrateo_qx", "todos")))
if (proporcion_exacta == "prorrateo_cae")
{M2_exacto <- M2 %>% filter(Area == "Consultas")}
else if (proporcion_exacta == "prorrateo_clinico")
{M2_exacto <- M2 %>% filter(Area != "Apoyo")}
else if (proporcion_exacta == "prorrateo_qx")
{M2_exacto <- M2 %>% filter(Area == "Quirofanos")}
else
{M2_exacto <- M2 %>% filter(Area!="No_existe")}
M2_exacto$prop <- M2_exacto$M2/sum(M2_exacto$M2)
GG2 <-  SIGFE %>% group_by(SIGCOM) %>%
summarise(Devengado = sum(Devengado)) %>%
filter(SIGCOM == b)
GG2 <- GG2 %>% summarise("Centro de Costo" = M2_exacto$CC,
Devengado = Devengado*M2_exacto$prop,
"Cuenta"=b, "Tipo" = 2)
GG1 <- rbind(GG1,GG2)}
View(M2_exacto)
